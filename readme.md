# Калькулятор

Я сделал веб-сервис, который выполняет вычисление арифметических выражений. Он предоставляет API-эндпоинт, куда пользователь может отправить арифметическое выражение и получить результат. Он состоит из оркестратора и агентов, работающих совместно для обработки вычислительных задач.

## Архитектура

- Оркестратор: принимает запросы от клиентов, распределяет вычислительные задачи между агентами и собирает результаты.
- Агент: выполняет вычисления и возвращает результаты оркестратору.

## API Эндпоинт

### `POST /api/v1/calculate`

Этот эндпоинт принимает арифметическое выражение, распределяет его выполнение между агентами и возвращает результат или сообщение об ошибке.

#### Тело запроса
```
{
  "expression": "2+2*2"
}
```
expression: арифметическое выражение, которое может содержать цифры, операторы +, -, *, / и скобки ().

#### Тело ответа (успешное вычисление)
```
{
  "result": "6"
}
```

#### Тело ответа (200 - успешно получен список выражений)

#### Тело ответа (ошибка 422 - неверное выражение)
```
{
  "error": "Expression is not valid"
}
```
Эта ошибка возникает, если выражение содержит недопустимые символы или синтаксические ошибки.

#### Тело ответа (ошибка 500 - внутренняя ошибка сервера)
```
{
  "error": "Internal server error"
}
```

### `POST /api/v1/register`

Агенты регистрируются на оркестраторе для получения задач.

#### Тело запроса

```
{
  "agent_url": "http://agent1:8081"
}
```

Тело ответа (в случае успеха)

```
{
  "message": "Agent registered successfully"
}
```

## Как использовать программу

1. Клонируй репозиторий
```
git clone https://github.com/VaDKustiK/yandex-golang-course.git
cd yandex-golang-course/calculator_service
```

2. Установи все зависимости
```
go mod init github.com/VaDKustiK/yandex-golang-course
```

3. Запускай
```
go run main.go
```
Это запустит сервер на порте 8080.

Важно перед выполнением перейти в /calculator_service командой:
```
cd yandex-golang-course/calculator_service
```

4. Зайди в Postman

- После запуска сервера через ```go run main.go``` открывай расширение Postman

- Нажимай **New HTTP request**

- Выбирай POST и пиши ```http://localhost:8080/api/v1/calculate```
![alt text](image.png)

- Переходи в **Headers** и пиши ```Content-Type: application/json``` как на скриншоте снизу
![alt text](image-1.png)

- Переходи в **Body**, нажимай **raw** и справа выбирай **JSON**. После этой процедуры можно писать запросы (как показано на скриншоте) и нажимать кнопку **SEND**, чтобы их отправить
![alt text](image-2.png)
